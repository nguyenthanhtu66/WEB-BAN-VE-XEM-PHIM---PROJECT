<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WEB B√ÅN V√â XEM PHIM</title>
    <link rel="stylesheet" href=".idea/style.css">
</head>

<body>
    <div id="app" class="app">
        <div class="header-label" id="header-label">
            <div class="header-container">
                <div class="header-account">
                    <div class="header-account">ƒêƒÉng KyÃÅ | ƒêƒÉng Nh√¢Ã£p</div>
                </div>
            </div>
        </div>
        <div class="header-menu" id="header-menu">
            <div class="menu-container">
                <a class="logo" href="#">
                    <img src="logo.png" alt="dtn logo">
                </a>
                <div class="menu-item">TRANG CH·ª¶</div>
                <div class="menu-item">GI·ªöI THI·ªÜU</div>
                <div class="menu-item">LI√äN H·ªÜ</div>
                <div class="menu-item">ƒê·∫∂T V√â</div>
                <div class="menu-item">TIN T·ª®C </div>
            </div>
        </div>
        <div class="main-container" id="main-container">
            <div class="slideshow-container">

                <div class="slider-container" id="mySlider">
                    <div class="slider-track">
                        <div class="slide" style="background-color: aqua;"></div>
                        <div class="slide" style="background-color: yellow;"></div>
                        <div class="slide" style="background-color: green;"></div>
                        <div class="slide" style="background-color: palevioletred;"></div>


                    </div>
                </div>
                <button class="slider-btn prev" id="prevBtn">‚ùÆ</button>
                <button class="slider-btn next" id="nextBtn">‚ùØ</button>
                <div class="slider-dots" id="sliderDots">
                </div>
            </div>
            <div class="filter-bar">
                <select id="filter-genre">
                    <option value="">üé¨ Th·ªÉ lo·∫°i</option>
                    <option value="H√†nh ƒë·ªông">H√†nh ƒë·ªông</option>
                    <option value="Phi√™u l∆∞u">Phi√™u l∆∞u</option>
                    <option value="Ho·∫°t h√¨nh">Ho·∫°t h√¨nh</option>
                    <option value="T√¢m l√Ω">T√¢m l√Ω</option>
                    <option value="Khoa h·ªçc vi·ªÖn t∆∞·ªüng">Khoa h·ªçc vi·ªÖn t∆∞·ªüng</option>
                </select>

                <select id="filter-cinema">
                    <option value="">üè¢ R·∫°p chi·∫øu</option>
                    <option value="CGV">CGV</option>
                    <option value="Galaxy">Galaxy</option>
                    <option value="BHD">BHD</option>
                    <option value="Lotte">Lotte</option>
                </select>

                <select id="filter-location">
                    <option value="">üìç ƒê·ªãa ƒëi·ªÉm</option>
                    <option value="TP.HCM">TP.HCM</option>
                    <option value="H√† N·ªôi">H√† N·ªôi</option>
                    <option value="ƒê√† N·∫µng">ƒê√† N·∫µng</option>
                    <option value="C·∫ßn Th∆°">C·∫ßn Th∆°</option>
                </select>
                <button id="reset-button">
                    XoÃÅa filter
                </button>
            </div>
            <div class="movie-selection">
                <div class="movie-status" id="playing-movies" onclick="toggleMovies('playing')">PHIM ƒêANG CHI√äÃÅU</div>
                <div class="movie-status" id="upcoming-movies" onclick="toggleMovies('upcoming')">PHIM SƒÇÃÅP CHI√äU</div>
            </div>
            <div class="movie-selection-content" id="movie-content">
            </div>
        </div>
        <div class="footer" id="footer">
            <div class="footer-container">

            </div>
        </div>
    </div>
    <script>
        //list phim dang chieu
        const playingMovies = [
            {
                title: "SpiderMan",
                genre: "H√†nh ƒë·ªông, Vi·ªÖn t∆∞·ªüng",
                duration: "181 ph√∫t",
                rating: 8.5
            },
            {
                title: "The Batman",
                genre: "H√†nh ƒë·ªông, T·ªôi ph·∫°m",
                duration: "176 ph√∫t",
                rating: 8.3
            },
            {
                title: "The Incridible",
                genre: "Ho·∫°t h√¨nh, Gia ƒë√¨nh",
                duration: "100 ph√∫t",
                rating: 8.9
            },
            {
                title: "Joker",
                genre: "T√¢m l√Ω, Ch√≠nh k·ªãch",
                duration: "122 ph√∫t",
                rating: 8.8
            }
        ];

        //list phim sap chieu
        const upcomingMovies = [
            {
                title: "PeterPan",
                genre: "Vi·ªÖn t∆∞·ªüng, Phi√™u l∆∞u",
                duration: "190 ph√∫t",
                rating: 9.0
            },
            {
                title: "Frozen 3",
                genre: "Ho·∫°t h√¨nh, Phi√™u l∆∞u",
                duration: "110 ph√∫t",
                rating: 8.6
            },
            {
                title: "Deadpool & Wolverine",
                genre: "H√†nh ƒë·ªông, H√†i h∆∞·ªõc",
                duration: "135 ph√∫t",
                rating: 8.7
            },
            {
                title: "Venom: The Last Dance",
                genre: "H√†nh ƒë·ªông, Khoa h·ªçc vi·ªÖn t∆∞·ªüng",
                duration: "140 ph√∫t",
                rating: 8.1
            }
        ];

        function renderMovies(list) {
            const movieContent = document.getElementById("movie-content");
            movieContent.innerHTML = ""; // x√≥a c≈©
            list.forEach(movie => {
                const card = document.createElement("div");
                card.className = "movie-card";
                card.innerHTML = `
                <img class="movie-poster" src="${movie.poster}" alt="${movie.title}">
                <div class="movie-info" style="padding: 15px;">
                    <h3 style="font-size: 18px; font-weight: 700; color: #000;">${movie.title}</h3>
                    <p style="font-size: 14px; color: #555; margin: 5px 0;">${movie.genre}</p>
                    <p style="font-size: 13px; color: #777;">‚è± ${movie.duration}</p>
                    <p style="font-size: 14px; color: #e50914; font-weight: 600; margin-top: 8px;">‚òÖ ${movie.rating}/10</p>
                </div>
            `;
                movieContent.appendChild(card);
            });
        }
        //switch phim dang chieu , phim sap chieu
        function toggleMovies(type) {
            const playingTab = document.getElementById("playing-movies");
            const upcomingTab = document.getElementById("upcoming-movies");

            playingTab.classList.remove("active");
            upcomingTab.classList.remove("active");

            if (type === "playing") {
                playingTab.classList.add("active");
                renderMovies(playingMovies);
            } else {
                upcomingTab.classList.add("active");
                renderMovies(upcomingMovies);
            }
        }

        window.onload = () => {
            document.getElementById("playing-movies").classList.add("active");
            renderMovies(playingMovies);

            const sliderContainer = document.getElementById('mySlider');
            // Th√™m ki·ªÉm tra 'if' ƒë·ªÉ code kh√¥ng l·ªói n·∫øu kh√¥ng t√¨m th·∫•y slider
            if (sliderContainer) {
                const sliderTrack = sliderContainer.querySelector('.slider-track');
                const slides = Array.from(sliderTrack.children);
                const nextButton = document.getElementById('nextBtn');
                const prevButton = document.getElementById('prevBtn');
                const dotsContainer = document.getElementById('sliderDots');

                // Ki·ªÉm tra xem c√°c ph·∫ßn t·ª≠ c√≥ t·ªìn t·∫°i kh√¥ng
                if (!sliderTrack || !nextButton || !prevButton || !dotsContainer || slides.length === 0) {
                    console.error("L·ªói: Kh√¥ng t√¨m th·∫•y c√°c th√†nh ph·∫ßn c·ªßa slider.");
                    return; // D·ª´ng l·∫°i n·∫øu thi·∫øu
                }

                let slideWidth = slides[0].getBoundingClientRect().width;
                let currentIndex = 0;
                let autoPlayInterval = null;
                const autoPlayTime = 5000; // 5 gi√¢y

                // T·∫°o c√°c d·∫•u ch·∫•m (Dots)
                slides.forEach((_, index) => {
                    const dot = document.createElement('button');
                    dot.classList.add('dot');
                    if (index === 0) dot.classList.add('active');
                    dot.addEventListener('click', () => {
                        goToSlide(index);
                        resetAutoPlay();
                    });
                    dotsContainer.appendChild(dot);
                });
                const dots = Array.from(dotsContainer.children);

                // H√†m c·∫≠p nh·∫≠t giao di·ªán
                function goToSlide(index) {
                    if (index < 0) {
                        currentIndex = slides.length - 1;
                    } else if (index >= slides.length) {
                        currentIndex = 0;
                    } else {
                        currentIndex = index;
                    }
                    // C·∫≠p nh·∫≠t l·∫°i slideWidth ph√≤ng tr∆∞·ªùng h·ª£p c·ª≠a s·ªï resize
                    slideWidth = slides[0].getBoundingClientRect().width;
                    sliderTrack.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
                    dots.forEach(dot => dot.classList.remove('active'));
                    dots[currentIndex].classList.add('active');
                }

                function nextSlide() { goToSlide(currentIndex + 1); }
                function prevSlide() { goToSlide(currentIndex - 1); }

                // G√°n s·ª± ki·ªán cho N√∫t Next/Prev
                nextButton.addEventListener('click', () => {
                    nextSlide();
                    resetAutoPlay();
                });
                prevButton.addEventListener('click', () => {
                    prevSlide();
                    resetAutoPlay();
                });

                // Logic Auto-play
                function startAutoPlay() {
                    stopAutoPlay(); // ƒê·∫£m b·∫£o kh√¥ng c√≥ interval n√†o ch·∫°y tr√πng
                    autoPlayInterval = setInterval(nextSlide, autoPlayTime);
                }
                function stopAutoPlay() { clearInterval(autoPlayInterval); }
                function resetAutoPlay() {
                    stopAutoPlay();
                    startAutoPlay();
                }

                // Logic "Pause on Hover"
                sliderContainer.addEventListener('mouseenter', stopAutoPlay);
                sliderContainer.addEventListener('mouseleave', startAutoPlay);

                // C·∫≠p nh·∫≠t l·∫°i slideWidth n·∫øu c·ª≠a s·ªï b·ªã resize
                window.addEventListener('resize', () => {
                    slideWidth = slides[0].getBoundingClientRect().width;
                    // C·∫≠p nh·∫≠t l·∫°i v·ªã tr√≠ (kh√¥ng c√≥ transition)
                    sliderTrack.style.transition = 'none';
                    sliderTrack.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
                    // B·∫≠t l·∫°i transition
                    setTimeout(() => {
                        sliderTrack.style.transition = 'transform 0.6s ease-in-out';
                    }, 0);
                });

                // B·∫Øt ƒë·∫ßu Auto-play
                startAutoPlay();
            }


        }
        //filter phim
        //need fix
        function applyFilters() {
            const genre = document.getElementById("filter-genre").value;
            const cinema = document.getElementById("filter-cinema").value;
            const location = document.getElementById("filter-location").value;

            const isPlayingTab = document.getElementById("playing-movies").classList.contains("active");
            const currentList = isPlayingTab ? playingMovies : upcomingMovies;

            const enrichedMovies = currentList.map(movie => ({
                ...movie,
                cinema: ["CGV", "BHD", "Galaxy", "Lotte"][Math.floor(Math.random() * 4)],
                location: ["TP.HCM", "H√† N·ªôi", "ƒê√† N·∫µng", "C·∫ßn Th∆°"][Math.floor(Math.random() * 4)]
            }));

            const filtered = enrichedMovies.filter(movie => {
                return (!genre || movie.genre.includes(genre)) &&
                    (!cinema || movie.cinema === cinema) &&
                    (!location || movie.location === location);
            });
            renderMovies(filtered);
        }
        document.getElementById("filter-genre").addEventListener("change", applyFilters);
        document.getElementById("filter-cinema").addEventListener("change", applyFilters);
        document.getElementById("filter-location").addEventListener("change", applyFilters);
    </script>
</body>

</html>